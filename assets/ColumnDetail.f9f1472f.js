import{d as f,_ as v,r as $,a as n,b as c,F as y,e as P,f as o,g as b,w as k,h as C,t as r,i as h,l as w,u as L,k as B,m as x,c as p}from"./index.6f9a7cbe.js";import{u as A}from"./useLoadMore.0ba5cf6b.js";const D=f({props:{list:{required:!0,type:Array}}}),F={class:"post-list"},I={class:"card-body"},M={class:"row my-3 align-items-center"},N={key:0,class:"col-4"},V=["src","alt"],S={class:"col-8"},j={class:"text-muted"};function q(t,e,a,d,u,m){const l=$("router-link");return n(),c("div",F,[(n(!0),c(y,null,P(t.list,s=>(n(),c("article",{key:s._id,class:"card mb-3 shadow-sm"},[o("div",I,[o("h4",null,[b(l,{to:`/posts/${s._id}`},{default:k(()=>[C(r(s.title),1)]),_:2},1032,["to"])]),o("div",M,[s.image?(n(),c("div",N,[o("img",{src:s.image,alt:s.title,class:"rounded-lg w-100"},null,8,V)])):h("",!0),o("div",S,[o("p",null,r(s.excerpt),1)])]),o("span",j,r(s.createdAt),1)])]))),128))])}const z=v(D,[["render",q],["__scopeId","data-v-39cbc860"]]),E=f({name:"ColumnDetail",components:{PostList:z},setup(){const t=w(),e=L(),a=B(t.params.id);x(()=>t.params,_=>{const i=_&&_.id,g=e.state.user.column;i&&g&&i===g&&(e.dispatch("fetchCurrentColumn",i),e.dispatch("fetchPosts",{cid:i}),a.value=_.id)}),e.dispatch("fetchCurrentColumn",a.value),e.dispatch("fetchPosts",{cid:a.value});const d=p(()=>e.getters.getColumnByid(a.value)),u=p(()=>e.getters.getPostsById(a.value)),m=p(()=>e.state.Posts.total),{loadMordPage:l,isLastPage:s}=A("fetchPosts",m,{pageSize:5,currentPage:2},a.value);return{lists:u,columnt:d,loadMordPage:l,isLastPage:s}}}),R={class:"column-detail-page w-75 mx-auto"},T={class:"column-info row mb-4 border-bottom pb-4 align-items-center"},G={class:"col-3"},H=["src"],J={class:"col-9 text-center"},K={class:"text-muted"};function O(t,e,a,d,u,m){const l=$("post-list");return n(),c("div",R,[o("div",T,[o("div",G,[t.columnt.avatar?(n(),c("img",{key:0,src:t.columnt.avatar,class:"rounded-circle border w-100",alt:"..."},null,8,H)):h("",!0)]),o("div",J,[o("h4",null,r(t.columnt.title),1),o("p",K,r(t.columnt.description),1)])]),b(l,{list:t.lists},null,8,["list"]),t.isLastPage?(n(),c("button",{key:0,class:"btn btn-outline-primary mt-2 mb-5 mx-auto btn-block w-25 d-block",onClick:e[0]||(e[0]=(...s)=>t.loadMordPage&&t.loadMordPage(...s))}," \u52A0\u8F7D\u66F4\u591A ")):h("",!0)])}const W=v(E,[["render",O]]);export{W as default};
