import{d as h,c as r,_ as g,o as C,r as _,a as c,b as l,F as f,e as y,f as e,t as p,g as m,w as b,h as $,i as F,G as k,L as w,u as L,j as x}from"./index.6f9a7cbe.js";import{U as B}from"./Uploader.ac001dde.js";import{u as P}from"./useLoadMore.0ba5cf6b.js";const E=h({name:"ColumnList",props:{list:{type:Object,required:!0}},setup(t,n){return{columnlist:r(()=>(C(t.list).map(s=>{if(!s.avatar)return s.avatar=new URL(""+new URL("pkq.7b8dade2.jpg",import.meta.url).href,self.location).href,s}),t.list))}}}),A={class:"row"},M={class:"card h-100 shadow-sm"},U={class:"card-body text-center"},j=["src"],D={class:"card-title"},N={class:"card-text text-left"};function S(t,n,u,s,i,d){const a=_("router-link");return c(),l("div",A,[(c(!0),l(f,null,y(t.columnlist,o=>(c(),l("div",{key:o._id,class:"col-4 mb-4"},[e("div",M,[e("div",U,[e("img",{src:o.avatar,alt:"",class:"rounded-circle border border-light my-3"},null,8,j),e("h5",D,p(o.title),1),e("p",N,p(o.description),1),m(a,{to:`/column/${o._id}`,class:"btn btn-outline-primary"},{default:b(()=>[$("\u8FDB\u5165\u4E13\u680F")]),_:2},1032,["to"])])])]))),128))])}const V=g(E,[["render",S],["__scopeId","data-v-019612e7"]]),H=""+new URL("callout.e640eb6c.svg",import.meta.url).href,R=h({name:"Home",components:{GlobalHeader:k,ColumnList:V,Loader:w,Uploader:B},setup(){const t=L(),n=r(()=>t.state.user);x(()=>{t.dispatch("fetchColumns",{pageSize:3}),console.log(t.state.columns)});const u=r(()=>t.state.columns.data),s=r(()=>t.state.columns.total),i=r(()=>t.state.columns.currentPage),{loadMordPage:d,isLastPage:a}=P("fetchColumns",s,{pageSize:3,currentPage:i.value?i.value+1:2});return{Columns:u,users:n,loadMordPage:d,isLastPage:a}}}),q={class:"homepage"},z={class:"py-5 text-center container"},G={class:"row py-lg-5"},T={class:"col-lg-6 col-md-8 mx-auto"},I=e("img",{src:H,class:"w-50",alt:""},null,-1),O=e("h2",{class:"font-weight-light"},"\u968F\u5FC3\u5199\u4F5C\uFF0C\u81EA\u7531\u8868\u8FBE",-1),J=e("h4",{class:"font-weight-bold text-center"},"\u53D1\u73B0\u7CBE\u5F69",-1);function K(t,n,u,s,i,d){const a=_("router-link"),o=_("column-list");return c(),l(f,null,[e("div",q,[e("section",z,[e("div",G,[e("div",T,[I,O,e("p",null,[m(a,{to:`/createpost/${t.users.column}`,class:"btn btn-primary my-2"},{default:b(()=>[$("\u5F00\u59CB\u5199\u6587\u7AE0")]),_:1},8,["to"])])])])]),J]),m(o,{list:t.Columns},null,8,["list"]),t.isLastPage?(c(),l("button",{key:0,class:"btn btn-outline-primary mt-2 mb-5 mx-auto btn-block w-25 d-block",onClick:n[0]||(n[0]=(...v)=>t.loadMordPage&&t.loadMordPage(...v))}," \u52A0\u8F7D\u66F4\u591A ")):F("",!0)],64)}const Y=g(R,[["render",K]]);export{Y as default};
